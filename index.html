<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¬Ù…Ø¹ÙŠØ© Ù…Ø­Ù…Ø¯ - Ù†Ø¸Ø§Ù… Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ù…Ø¨Ø§Ø´Ø±</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f0f4f8; padding: 20px; text-align: center; }
        .container { max-width: 600px; margin: auto; background: white; padding: 30px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        h1 { color: #1a73e8; margin-bottom: 5px; }
        .info-box { background: #e8f0fe; padding: 10px; border-radius: 10px; margin-bottom: 25px; color: #1967d2; font-weight: bold; }
        table { width: 100%; border-collapse: collapse; background: white; }
        th, td { padding: 15px; border-bottom: 1px solid #eee; text-align: center; }
        th { background: #1a73e8; color: white; border-radius: 5px; }
        .paid { color: #28a745; font-weight: bold; background: #e6ffed; padding: 5px 12px; border-radius: 15px; }
        .not-paid { color: #dc3545; font-weight: bold; background: #ffeef0; padding: 5px 12px; border-radius: 15px; }
        input { width: 70px; padding: 6px; border: 1px solid #ddd; border-radius: 5px; text-align: center; }
        button { background: #34a853; color: white; border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; transition: 0.3s; }
        button:hover { background: #2d8e47; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ“Š Ù†Ø¸Ø§Ù… Ø¬Ù…Ø¹ÙŠØ© Ù…Ø­Ù…Ø¯</h1>
    <div class="info-box">Ø§Ù„Ù‚Ø³Ø·: 400 ÙŠÙˆØ±Ùˆ | Ø§Ù„Ù…ÙˆØ¹Ø¯: 22 Ù…Ù† ÙƒÙ„ Ø´Ù‡Ø±</div>

    <table>
        <thead>
            <tr>
                <th>Ø§Ù„Ø§Ø³Ù…</th>
                <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
                <th>ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹</th>
            </tr>
        </thead>
        <tbody id="tableBody">
            </tbody>
    </table>
</div>

<script>
    // Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø£Ø®ÙˆØ°Ø© Ù…Ù† ØµÙˆØ±Ùƒ (Firebase Config)
    const firebaseConfig = {
        apiKey: "AIzaSyC-J-Cg9OeZD--fwStoZTFzK4qU4v170M",
        authDomain: "jamia-app-5bd27.firebaseapp.com",
        databaseURL: "https://jamia-app-5bd27-default-rtdb.europe-west1.firebasedatabase.app/",
        projectId: "jamia-app-5bd27",
        storageBucket: "jamia-app-5bd27.appspot.com",
        messagingSenderId: "870308712173",
        appId: "1:870308712173:web:be101df99fef2085b344a2",
        measurementId: "G-FZ9GMJTEL1"
    };

    // ØªØ´ØºÙŠÙ„ Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø£Ø¹Ø¶Ø§Ø¡ ÙˆØ§Ù„Ø£ÙƒÙˆØ§Ø¯ (ÙŠÙ…ÙƒÙ†Ùƒ ØªØºÙŠÙŠØ± Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ ÙƒÙ…Ø§ ØªØ­Ø¨)
    const members = [
        { id: 1, name: "Ù…Ø­Ø³Ù†", code: "1010" },
        { id: 2, name: "Ø³Ù„ÙŠÙ…", code: "2020" },
        { id: 3, name: "Ø£Ø¨Ùˆ Ù…Ø­Ù…Ø¯", code: "3030" },
        { id: 4, name: "Ù…Ø´ØªØ§Ù‚", code: "4040" },
        { id: 5, name: "Ø±Ø¶ÙˆØ§Ù†", code: "5050" },
        { id: 6, name: "Ø­Ù…Ø²Ù‡", code: "6060" },
        { id: 7, name: "Ø¹Ù„ÙŠ", code: "7070" },
        { id: 8, name: "Ø£Ø¨Ùˆ Ù‡ØªØ§Ù†", code: "8080" },
        { id: 9, name: "Ø£Ø¨Ùˆ Ø®Ø§Ù„Ø¯", code: "9090" },
        { id: 10, name: "Ø¹Ø¨Ø¯Ø§Ù„Ø±Ø­Ù…Ù† Ø§Ù„ØµØ¨ÙŠØ­", code: "0000" }
    ];

    // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯ÙˆÙ„ ÙÙˆØ±Ø§Ù‹ Ø¹Ù†Ø¯ Ø£ÙŠ ØªØºÙŠÙŠØ±
    db.ref('payments').on('value', (snapshot) => {
        const paidStatus = snapshot.val() || {};
        const tableBody = document.getElementById('tableBody');
        tableBody.innerHTML = "";

        members.forEach(member => {
            const isPaid = paidStatus[member.id] === true;
            tableBody.innerHTML += `
                <tr>
                    <td><strong>${member.name}</strong></td>
                    <td><span class="${isPaid ? 'paid' : 'not-paid'}">${isPaid ? 'âœ… ØªÙ… Ø§Ù„Ø¯ÙØ¹' : 'âŒ Ù„Ù… ÙŠØ¯ÙØ¹'}</span></td>
                    <td>
                        ${isPaid ? 'âœ”ï¸' : `
                            <input type="text" id="code-${member.id}" placeholder="Ø§Ù„ÙƒÙˆØ¯">
                            <button onclick="confirmPay(${member.id}, '${member.code}')">ØªØ£ÙƒÙŠØ¯</button>
                        `}
                    </td>
                </tr>
            `;
        });
    });

    function confirmPay(id, correctCode) {
        const inputCode = document.getElementById('code-' + id).value;
        if (inputCode === correctCode) {
            db.ref('payments/' + id).set(true);
            alert("Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ØªÙ… ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¯ÙØ¹ Ø¨Ù†Ø¬Ø§Ø­.");
        } else {
            alert("Ø§Ù„ÙƒÙˆØ¯ ØºÙŠØ± ØµØ­ÙŠØ­ØŒ ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ù…Ø­Ù…Ø¯.");
        }
    }
</script>
</body>
</html>
