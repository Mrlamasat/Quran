<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø§Ø³ØªÙ…Ø§Ø¹ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b1120;
  --card:#111827;
  --gold:#d4af37;
  --text:#f1f5f9;
}
body{margin:0;font-family:'Cairo',sans-serif;background:var(--bg);color:var(--text);}
header{text-align:center;padding:25px;font-size:26px;font-weight:bold;background:#0f172a;border-bottom:1px solid #1f2937;}
.prayer,#cityName,#prayerTable{text-align:center;padding:10px;color:var(--gold);font-size:14px;}
.countdown{
  text-align:center;font-size:18px;padding:10px;background:#111827;color:var(--gold);
  font-weight:bold;margin:10px 0;
  border-radius:8px;
  box-shadow: 0 0 10px var(--gold);
  transition: all 0.3s;
}
.reciter{margin-bottom:30px;text-align:center;}
.reciter h3{color:var(--gold);}
iframe{width:100%;max-width:825px;border:none;border-radius:12px;}
footer{text-align:center;padding:20px;font-size:13px;color:#94a3b8;margin-bottom:20px;}
</style>
</head>
<body>

<header>ğŸ§ Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ… - Ø§Ø³ØªÙ…Ø§Ø¹ Ù…Ø¨Ø§Ø´Ø±</header>

<div class="prayer" id="locationStatus">Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ...</div>
<div class="prayer" id="cityName"></div>
<div class="prayer" id="prayerTable"></div>
<div class="countdown" id="countdown">Ø¬Ø§Ø±ÙŠ Ø­Ø³Ø§Ø¨ Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©...</div>

<h2 style="text-align:center;color:#d4af37;">Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø§Ø±Ø¦</h2>

<div class="reciter">
  <h3>Ù…Ø§Ù‡Ø± Ø§Ù„Ù…Ø¹ÙŠÙ‚Ù„ÙŠ</h3>
  <iframe src="https://www.tvquran.com/ar/recitation/82/collection_embeddable" id="iframe1" allowtransparency="1" scrolling="no"></iframe>
</div>

<div class="reciter">
  <h3>Ø¹Ø¨Ø¯Ø§Ù„ÙˆÙ„ÙŠ Ø§Ù„Ø§Ø±ÙƒØ§Ù†ÙŠ</h3>
  <iframe src="https://www.tvquran.com/ar/recitation/6/collection_embeddable" id="iframe2" allowtransparency="1" scrolling="no"></iframe>
</div>

<div class="reciter">
  <h3>ÙŠØ§Ø³Ø± Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ - Ø§Ù„Ø§Ø¹Ø±Ø§Ù</h3>
  <iframe src="https://www.tvquran.com/ar/selection/2886/embeddable" id="iframe3" allowtransparency="1" scrolling="no"></iframe>
</div>

<footer>Ø¬Ù…ÙŠØ¹ Ø­Ù‚ÙˆÙ‚ Ø§Ù„ØªÙ„Ø§ÙˆØ§Øª Ù…Ø­ÙÙˆØ¸Ø© Ù„Ø£ØµØ­Ø§Ø¨Ù‡Ø§</footer>

<script>
// ======= ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ + Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø© =======
let prayerTimes = {};

function getLocation(){
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(success, error);
  } else {
    document.getElementById("locationStatus").innerHTML = "Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹";
  }
}

function success(position){
  const lat = position.coords.latitude;
  const lon = position.coords.longitude;
  document.getElementById("locationStatus").innerHTML = "ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹Ùƒ âœ”";

  // Ø§Ø³Ù… Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©
  fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`)
    .then(res => res.json())
    .then(data => {
      const city = data.address.city || data.address.town || data.address.village || "Ù…Ø¯ÙŠÙ†ØªÙƒ";
      document.getElementById("cityName").innerHTML = `ğŸ“ ${city}`;
    });

  // Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©
  fetch(`https://api.aladhan.com/v1/timings?latitude=${lat}&longitude=${lon}&method=4`)
    .then(res => res.json())
    .then(data => {
      prayerTimes = data.data.timings;
      displayPrayers();
      startCountdown();
    });
}

function error(){
  document.getElementById("locationStatus").innerHTML = "ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ù‚ÙŠØª";
}

function displayPrayers(){
  const names = { Fajr:"Ø§Ù„ÙØ¬Ø±", Dhuhr:"Ø§Ù„Ø¸Ù‡Ø±", Asr:"Ø§Ù„Ø¹ØµØ±", Maghrib:"Ø§Ù„Ù…ØºØ±Ø¨", Isha:"Ø§Ù„Ø¹Ø´Ø§Ø¡" };
  let html = "";
  for(let key in names){
    html += `${names[key]}: ${prayerTimes[key]} | `;
  }
  document.getElementById("prayerTable").innerHTML = html;
}

function startCountdown(){
  setInterval(()=>{
    const now = new Date();
    const prayers = ["Fajr","Dhuhr","Asr","Maghrib","Isha"];
    const names = { Fajr:"Ø§Ù„ÙØ¬Ø±", Dhuhr:"Ø§Ù„Ø¸Ù‡Ø±", Asr:"Ø§Ù„Ø¹ØµØ±", Maghrib:"Ø§Ù„Ù…ØºØ±Ø¨", Isha:"Ø§Ù„Ø¹Ø´Ø§Ø¡" };
    for(let i=0;i<prayers.length;i++){
      let timeStr = prayerTimes[prayers[i]];
      if(!timeStr) return;
      let [hours,minutes] = timeStr.split(":");
      let prayerTime = new Date();
      prayerTime.setHours(hours,minutes,0);
      if(prayerTime>now){
        let diff=prayerTime-now;
        let h=Math.floor(diff/1000/60/60);
        let m=Math.floor(diff/1000/60)%60;
        let s=Math.floor(diff/1000)%60;
        document.getElementById("countdown").innerHTML =
        `Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©: ${names[prayers[i]]} Ø¨Ø¹Ø¯ ${h}Ø³ ${m}Ø¯ ${s}Ø«`;
        return;
      }
    }
  },1000);
}

// ======= Ø¶Ø¨Ø· Ø§Ø±ØªÙØ§Ø¹ iframe ØªÙ„Ù‚Ø§Ø¦ÙŠ =======
function adjustIframes(){
  const winHeight = window.innerHeight;
  const iframes = [document.getElementById("iframe1"), document.getElementById("iframe2"), document.getElementById("iframe3")];
  iframes.forEach((frame,index)=>{
    // Ù†Ø¶Ø¹ Ø§Ø±ØªÙØ§Ø¹ Ù…Ø®ØªÙ„Ù Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹: Ø§Ù„Ø¨Ø« Ø§Ù„Ø·ÙˆÙŠÙ„ 670ØŒ Ø§Ù„Ù‚ØµÙŠØ± 280ØŒ Ù„ÙƒÙ† ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø©
    if(index===2){ // ÙŠØ§Ø³Ø± Ø§Ù„Ø¯ÙˆØ³Ø±ÙŠ
      frame.style.height = Math.min(400, winHeight*0.5) + "px";
    } else {
      frame.style.height = Math.min(670, winHeight*0.8) + "px";
    }
  });
}

window.onload = function(){
  getLocation();
  adjustIframes();
}

window.onresize = function(){
  adjustIframes();
}

</script>

</body>
</html>
